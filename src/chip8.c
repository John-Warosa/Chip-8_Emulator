#include "chip8.h"
#include <stdlib.h>

#define FONT_SIZE (5*16)
#define FONT_START 0x50


static const fonts[FONT_SIZE] = {
    0xF0, 0x90, 0x90, 0x90, 0xF0,   // 0
	0x20, 0x60, 0x20, 0x20, 0x70,   // 1
	0xF0, 0x10, 0xF0, 0x80, 0xF0,   // 2
	0xF0, 0x10, 0xF0, 0x10, 0xF0,   // 3
	0x90, 0x90, 0xF0, 0x10, 0x10,   // 4
	0xF0, 0x80, 0xF0, 0x10, 0xF0,   // 5
	0xF0, 0x80, 0xF0, 0x90, 0xF0,   // 6
	0xF0, 0x10, 0x20, 0x40, 0x40,   // 7
	0xF0, 0x90, 0xF0, 0x90, 0xF0,   // 8
	0xF0, 0x90, 0xF0, 0x10, 0xF0,   // 9
	0xF0, 0x90, 0xF0, 0x90, 0x90,   // A
	0xE0, 0x90, 0xE0, 0x90, 0xE0,   // B
	0xF0, 0x80, 0x80, 0x80, 0xF0,   // C
	0xE0, 0x90, 0x90, 0x90, 0xE0,   // D
	0xF0, 0x80, 0xF0, 0x80, 0xF0,   // E
	0xF0, 0x80, 0xF0, 0x80, 0x80,   // F
}


static void set_font_data(bool *mem) {
    for (size_t i = 0; i < FONT_SIZE; ++i) {
        mem[FONT_START+i] = fonts[i];
    }
}


struct Chip8 *Chip8_init() {
    struct Chip8 *chip8 = calloc(1, sizeof(chip8));

    if (chip8 == nullptr) {
    }

    set_font_data(chip8->mem);
    chip8->PC = 0x200;

    return chip8;
}


void Chip8_loop(struct Chip8 *chip) {

}
